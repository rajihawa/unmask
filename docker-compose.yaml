version: "3.9"
services:
  server:
    build:
      context: .
      dockerfile: docker/dev.dockerfile
      args:
        - PORT=4000
    ports:
      - 4000:4000
    environment:
      - ADMIN_USERNAME=admin
      - ADMIN_PASSWORD=password
      - JWT_SIGN_KEY=supersecretkey
      - PRODUCTION=false
      - DATABASE_URL=database:28015
      - DATABASE_USERNAME=unmask_user
      - DATABASE_PASSWORD=unmask@123
      - AES_KEY=655368566D597133743677397A24432646294A404E635166546A576E5A723475
    working_dir: /app
    volumes:
      - ./:/app
      - /app/tmp
  database:
    image: rethinkdb:2.4.1-buster-slim
    ports:
      - 28015:28015
      - 8080:8080
    working_dir: /data
    volumes:
      - ./rethink_data/:/data/rethinkdb_data
      
